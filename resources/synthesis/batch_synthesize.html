<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰¹é‡åˆæˆ</title>
    <link rel="stylesheet" href="./batch_synthesize.css">
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <div class="batch-logo">âš—ï¸</div>
            <h1 class="title">æ‰¹é‡åˆæˆå·¥åŠ</h1>
            <p class="subtitle">é«˜æ•ˆåˆæˆï¼Œæ‰¹é‡ç”Ÿäº§</p>
        </div>

        
        <div class="user-info">
            <div class="user-profile">
                <img src="{{userAvatar}}" alt="ç”¨æˆ·å¤´åƒ" class="user-avatar">
                <div class="user-details">
                    <div class="user-name">{{userName}}</div>
                    <div class="user-level">å·¥åŒ ç­‰çº§ {{userLevel}}</div>
                </div>
            </div>
            <div class="user-resources">
                <div class="resource-item">
                    <span class="resource-icon">ğŸ’°</span>
                    <span class="resource-amount">{{userMoney}}</span>
                </div>
                <div class="resource-item">
                    <span class="resource-icon">ğŸ’</span>
                    <span class="resource-amount">{{userGems}}</span>
                </div>
                <div class="resource-item">
                    <span class="resource-icon">âš¡</span>
                    <span class="resource-amount">{{userEnergy}}</span>
                </div>
            </div>
        </div>

        
        <div class="batch-config">
            <div class="config-header">
                <h2 class="config-title">æ‰¹é‡åˆæˆé…ç½®</h2>
                <div class="quick-actions">
                    <button class="quick-btn" data-action="save-template">ğŸ’¾ ä¿å­˜æ¨¡æ¿</button>
                    <button class="quick-btn" data-action="load-template">ğŸ“ åŠ è½½æ¨¡æ¿</button>
                    <button class="quick-btn" data-action="clear-all">ğŸ—‘ï¸ æ¸…ç©ºé…ç½®</button>
                </div>
            </div>

           
            <div class="recipe-selection">
                <div class="selection-header">
                    <h3 class="selection-title">é€‰æ‹©é…æ–¹</h3>
                    <div class="recipe-filters">
                        <select class="filter-category">
                            <option value="all">å…¨éƒ¨åˆ†ç±»</option>
                            <option value="weapon">æ­¦å™¨</option>
                            <option value="armor">é˜²å…·</option>
                            <option value="accessory">é¥°å“</option>
                            <option value="consumable">æ¶ˆè€—å“</option>
                            <option value="material">ææ–™</option>
                        </select>
                        <select class="filter-rarity">
                            <option value="all">å…¨éƒ¨ç¨€æœ‰åº¦</option>
                            <option value="common">æ™®é€š</option>
                            <option value="uncommon">ä¼˜ç§€</option>
                            <option value="rare">ç¨€æœ‰</option>
                            <option value="epic">å²è¯—</option>
                            <option value="legendary">ä¼ è¯´</option>
                        </select>
                        <input type="text" class="search-recipe" placeholder="æœç´¢é…æ–¹...">
                    </div>
                </div>

                <div class="recipe-grid">
                    {{#each availableRecipes}}
                    <div class="recipe-card {{rarity}}" data-recipe-id="{{id}}">
                        <div class="recipe-image">
                            <img src="{{image}}" alt="{{name}}">
                            <div class="recipe-rarity-badge">{{rarityText}}</div>
                        </div>
                        <div class="recipe-info">
                            <div class="recipe-name">{{name}}</div>
                            <div class="recipe-category">{{category}}</div>
                            <div class="recipe-level">éœ€è¦ç­‰çº§: {{requiredLevel}}</div>
                        </div>
                        <div class="recipe-materials">
                            {{#each materials}}
                            <div class="material-item {{#if insufficient}}insufficient{{/if}}">
                                <img src="{{icon}}" alt="{{name}}" class="material-icon">
                                <span class="material-count">{{required}}/{{available}}</span>
                            </div>
                            {{/each}}
                        </div>
                        <div class="recipe-actions">
                            <button class="add-recipe-btn" {{#unless canCraft}}disabled{{/unless}}>æ·»åŠ åˆ°é˜Ÿåˆ—</button>
                        </div>
                    </div>
                    {{/each}}
                </div>
            </div>
        </div>

        
        <div class="synthesis-queue">
            <div class="queue-header">
                <h3 class="queue-title">åˆæˆé˜Ÿåˆ—</h3>
                <div class="queue-stats">
                    <div class="stat-item">
                        <span class="stat-label">é˜Ÿåˆ—æ•°é‡:</span>
                        <span class="stat-value">{{queueCount}}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">é¢„è®¡æ—¶é—´:</span>
                        <span class="stat-value">{{estimatedTime}}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">æ€»æˆæœ¬:</span>
                        <span class="stat-value">{{totalCost}}</span>
                    </div>
                </div>
            </div>

            <div class="queue-content">
                {{#if queueItems.length}}
                <div class="queue-list">
                    {{#each queueItems}}
                    <div class="queue-item" data-queue-id="{{id}}">
                        <div class="item-order">{{@index}}</div>
                        <div class="item-image">
                            <img src="{{recipe.image}}" alt="{{recipe.name}}">
                        </div>
                        <div class="item-info">
                            <div class="item-name">{{recipe.name}}</div>
                            <div class="item-quantity">æ•°é‡: {{quantity}}</div>
                            <div class="item-time">æ—¶é—´: {{craftTime}}</div>
                        </div>
                        <div class="item-materials">
                            {{#each materials}}
                            <div class="material-summary">
                                <img src="{{icon}}" alt="{{name}}" class="material-icon">
                                <span class="material-need">{{totalNeeded}}</span>
                            </div>
                            {{/each}}
                        </div>
                        <div class="item-controls">
                            <div class="quantity-controls">
                                <button class="quantity-btn" data-action="decrease">-</button>
                                <input type="number" class="quantity-input" value="{{quantity}}" min="1" max="{{maxQuantity}}">
                                <button class="quantity-btn" data-action="increase">+</button>
                            </div>
                            <button class="remove-btn" data-action="remove">ğŸ—‘ï¸</button>
                            <button class="move-up-btn" data-action="move-up" {{#if @first}}disabled{{/if}}>â†‘</button>
                            <button class="move-down-btn" data-action="move-down" {{#if @last}}disabled{{/if}}>â†“</button>
                        </div>
                    </div>
                    {{/each}}
                </div>
                {{else}}
                <div class="empty-queue">
                    <div class="empty-icon">ğŸ“‹</div>
                    <div class="empty-text">åˆæˆé˜Ÿåˆ—ä¸ºç©º</div>
                    <div class="empty-desc">è¯·ä»ä¸Šæ–¹é€‰æ‹©é…æ–¹æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­</div>
                </div>
                {{/if}}
            </div>
        </div>

        <!-- èµ„æºéœ€æ±‚æ€»è§ˆ -->
        <div class="resource-overview">
            <div class="overview-header">
                <h3 class="overview-title">èµ„æºéœ€æ±‚æ€»è§ˆ</h3>
                <div class="overview-actions">
                    <button class="auto-buy-btn" {{#unless canAutoBuy}}disabled{{/unless}}>ğŸ›’ è‡ªåŠ¨è´­ä¹°ç¼ºå¤±ææ–™</button>
                    <button class="optimize-btn">âš¡ ä¼˜åŒ–åˆæˆé¡ºåº</button>
                </div>
            </div>

            <div class="resource-grid">
                {{#each totalResources}}
                <div class="resource-card {{#if insufficient}}insufficient{{/if}}">
                    <div class="resource-image">
                        <img src="{{icon}}" alt="{{name}}">
                        {{#if insufficient}}
                        <div class="insufficient-badge">ä¸è¶³</div>
                        {{/if}}
                    </div>
                    <div class="resource-details">
                        <div class="resource-name">{{name}}</div>
                        <div class="resource-need">éœ€è¦: {{needed}}</div>
                        <div class="resource-have">æ‹¥æœ‰: {{available}}</div>
                        {{#if insufficient}}
                        <div class="resource-missing">ç¼ºå°‘: {{missing}}</div>
                        <div class="resource-cost">è´­ä¹°è´¹ç”¨: {{buyCost}}</div>
                        {{/if}}
                    </div>
                    {{#if insufficient}}
                    <div class="resource-actions">
                        <button class="buy-resource-btn">è´­ä¹°</button>
                    </div>
                    {{/if}}
                </div>
                {{/each}}
            </div>
        </div>

        <!-- åˆæˆè®¾ç½® -->
        <div class="synthesis-settings">
            <div class="settings-header">
                <h3 class="settings-title">åˆæˆè®¾ç½®</h3>
            </div>

            <div class="settings-grid">
                <div class="setting-group">
                    <label class="setting-label">åˆæˆæ¨¡å¼</label>
                    <select class="setting-select" name="synthesisMode">
                        <option value="sequential">é¡ºåºåˆæˆ</option>
                        <option value="parallel">å¹¶è¡Œåˆæˆ</option>
                        <option value="optimized">æ™ºèƒ½ä¼˜åŒ–</option>
                    </select>
                    <div class="setting-desc">é€‰æ‹©åˆæˆæ‰§è¡Œæ–¹å¼</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">å¤±è´¥å¤„ç†</label>
                    <select class="setting-select" name="failureHandling">
                        <option value="continue">ç»§ç»­åˆæˆ</option>
                        <option value="pause">æš‚åœé˜Ÿåˆ—</option>
                        <option value="retry">è‡ªåŠ¨é‡è¯•</option>
                    </select>
                    <div class="setting-desc">åˆæˆå¤±è´¥æ—¶çš„å¤„ç†æ–¹å¼</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">æˆåŠŸç‡åŠ æˆ</label>
                    <div class="bonus-options">
                        <label class="bonus-option">
                            <input type="checkbox" name="useBonus" value="workshop">
                            <span class="bonus-text">å·¥åŠåŠ æˆ (+{{workshopBonus}}%)</span>
                        </label>
                        <label class="bonus-option">
                            <input type="checkbox" name="useBonus" value="skill">
                            <span class="bonus-text">æŠ€èƒ½åŠ æˆ (+{{skillBonus}}%)</span>
                        </label>
                        <label class="bonus-option">
                            <input type="checkbox" name="useBonus" value="item">
                            <span class="bonus-text">é“å…·åŠ æˆ (+{{itemBonus}}%)</span>
                        </label>
                    </div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">é€šçŸ¥è®¾ç½®</label>
                    <div class="notification-options">
                        <label class="notification-option">
                            <input type="checkbox" name="notification" value="completion">
                            <span class="notification-text">å®Œæˆé€šçŸ¥</span>
                        </label>
                        <label class="notification-option">
                            <input type="checkbox" name="notification" value="failure">
                            <span class="notification-text">å¤±è´¥é€šçŸ¥</span>
                        </label>
                        <label class="notification-option">
                            <input type="checkbox" name="notification" value="milestone">
                            <span class="notification-text">é‡Œç¨‹ç¢‘é€šçŸ¥</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ‰§è¡Œæ§åˆ¶ -->
        <div class="execution-control">
            <div class="control-header">
                <h3 class="control-title">æ‰§è¡Œæ§åˆ¶</h3>
                <div class="execution-status">
                    <div class="status-indicator {{executionStatus}}"></div>
                    <span class="status-text">{{executionStatusText}}</span>
                </div>
            </div>

            <div class="control-actions">
                <button class="control-btn start-btn" {{#if isExecuting}}disabled{{/if}}>â–¶ï¸ å¼€å§‹æ‰¹é‡åˆæˆ</button>
                <button class="control-btn pause-btn" {{#unless isExecuting}}disabled{{/unless}}>â¸ï¸ æš‚åœåˆæˆ</button>
                <button class="control-btn stop-btn" {{#unless isExecuting}}disabled{{/unless}}>â¹ï¸ åœæ­¢åˆæˆ</button>
                <button class="control-btn preview-btn">ğŸ‘ï¸ é¢„è§ˆç»“æœ</button>
            </div>

            {{#if isExecuting}}
            <div class="execution-progress">
                <div class="progress-header">
                    <span class="progress-text">å½“å‰è¿›åº¦</span>
                    <span class="progress-percentage">{{progressPercentage}}%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{progressPercentage}}%"></div>
                </div>
                <div class="progress-details">
                    <div class="current-item">æ­£åœ¨åˆæˆ: {{currentItem}}</div>
                    <div class="remaining-time">å‰©ä½™æ—¶é—´: {{remainingTime}}</div>
                    <div class="completed-count">å·²å®Œæˆ: {{completedCount}}/{{totalCount}}</div>
                </div>
            </div>
            {{/if}}
        </div>

        <!-- åˆæˆå†å² -->
        <div class="synthesis-history">
            <div class="history-header">
                <h3 class="history-title">æœ€è¿‘æ‰¹é‡åˆæˆ</h3>
                <button class="view-all-btn">æŸ¥çœ‹å…¨éƒ¨å†å²</button>
            </div>

            <div class="history-list">
                {{#each recentBatches}}
                <div class="history-item">
                    <div class="history-time">{{time}}</div>
                    <div class="history-summary">
                        <div class="summary-text">æ‰¹é‡åˆæˆ {{itemCount}} ç§ç‰©å“</div>
                        <div class="summary-stats">
                            <span class="success-count">æˆåŠŸ: {{successCount}}</span>
                            <span class="failure-count">å¤±è´¥: {{failureCount}}</span>
                            <span class="total-time">è€—æ—¶: {{duration}}</span>
                        </div>
                    </div>
                    <div class="history-actions">
                        <button class="repeat-btn">ğŸ”„ é‡å¤æ‰§è¡Œ</button>
                        <button class="details-btn">ğŸ“‹ æŸ¥çœ‹è¯¦æƒ…</button>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>

        <!-- é¡µè„š -->
        <div class="footer">
            <div class="footer-info">
                <p class="info-text">æ‰¹é‡åˆæˆå¯ä»¥å¤§å¹…æå‡ç”Ÿäº§æ•ˆç‡ï¼Œåˆç†è§„åˆ’èµ„æºä½¿ç”¨</p>
                <p class="update-time">æœ€åæ›´æ–°: {{updateTime}}</p>
            </div>
        </div>
    </div>

    <script>
        
        document.addEventListener('DOMContentLoaded', function() {
         
            const filterCategory = document.querySelector('.filter-category');
            const filterRarity = document.querySelector('.filter-rarity');
            const searchInput = document.querySelector('.search-recipe');
            
            function filterRecipes() {
                const category = filterCategory.value;
                const rarity = filterRarity.value;
                const search = searchInput.value.toLowerCase();
                
                document.querySelectorAll('.recipe-card').forEach(card => {
                    const cardCategory = card.dataset.category;
                    const cardRarity = card.dataset.rarity;
                    const cardName = card.querySelector('.recipe-name').textContent.toLowerCase();
                    
                    const categoryMatch = category === 'all' || cardCategory === category;
                    const rarityMatch = rarity === 'all' || cardRarity === rarity;
                    const searchMatch = search === '' || cardName.includes(search);
                    
                    card.style.display = categoryMatch && rarityMatch && searchMatch ? 'block' : 'none';
                });
            }
            
            filterCategory.addEventListener('change', filterRecipes);
            filterRarity.addEventListener('change', filterRecipes);
            searchInput.addEventListener('input', filterRecipes);
            document.querySelectorAll('.add-recipe-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const recipeCard = this.closest('.recipe-card');
                    const recipeId = recipeCard.dataset.recipeId;
                    console.log('æ·»åŠ é…æ–¹åˆ°é˜Ÿåˆ—:', recipeId);
                });
            });
            
            
            document.querySelectorAll('.quantity-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const action = this.dataset.action;
                    const input = this.parentNode.querySelector('.quantity-input');
                    let value = parseInt(input.value);
                    
                    if (action === 'increase') {
                        value = Math.min(value + 1, parseInt(input.max));
                    } else if (action === 'decrease') {
                        value = Math.max(value - 1, 1);
                    }
                    
                    input.value = value;
                    
                });
            });
            
           
            document.querySelector('.start-btn').addEventListener('click', function() {
                console.log('å¼€å§‹æ‰¹é‡åˆæˆ');
            });
            
            document.querySelector('.pause-btn').addEventListener('click', function() {
                console.log('æš‚åœåˆæˆ');
            });
            
            document.querySelector('.stop-btn').addEventListener('click', function() {
                console.log('åœæ­¢åˆæˆ');
            });
        });
    </script>
</body>
</html>