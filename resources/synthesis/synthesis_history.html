<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆæˆå†å²</title>
    <link rel="stylesheet" href="../common/common.css">
    <link rel="stylesheet" href="synthesis_history.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¬ åˆæˆå†å²è®°å½•</h1>
            <div class="user-info">
                <img src="{{playerAvatar}}" alt="å¤´åƒ" class="avatar">
                <div class="user-details">
                    <div class="username">{{username}}</div>
                    <div class="user-level">å·¥åŠç­‰çº§: {{workshopLevel}}</div>
                    <div class="money">é‡‘å¸: {{money}}</div>
                </div>
            </div>
        </div>

        <div class="statistics-section">
            <h2>ğŸ“Š åˆæˆç»Ÿè®¡</h2>
            <div class="stats-grid">
                <div class="stat-card total">
                    <div class="stat-icon">ğŸ§ª</div>
                    <div class="stat-info">
                        <div class="stat-label">æ€»åˆæˆæ¬¡æ•°</div>
                        <div class="stat-value">{{totalAttempts}}</div>
                    </div>
                </div>
                <div class="stat-card success">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-info">
                        <div class="stat-label">æˆåŠŸæ¬¡æ•°</div>
                        <div class="stat-value">{{successCount}}</div>
                    </div>
                </div>
                <div class="stat-card rate">
                    <div class="stat-icon">ğŸ“ˆ</div>
                    <div class="stat-info">
                        <div class="stat-label">æˆåŠŸç‡</div>
                        <div class="stat-value">{{successRate}}%</div>
                    </div>
                </div>
                <div class="stat-card streak">
                    <div class="stat-icon">ğŸ”¥</div>
                    <div class="stat-info">
                        <div class="stat-label">æœ€é«˜è¿èƒœ</div>
                        <div class="stat-value">{{maxStreak}}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="filter-section">
            <h3>ğŸ” ç­›é€‰é€‰é¡¹</h3>
            <div class="filter-controls">
                <div class="filter-group">
                    <label>ç»“æœç­›é€‰:</label>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">å…¨éƒ¨</button>
                        <button class="filter-btn" data-filter="success">æˆåŠŸ</button>
                        <button class="filter-btn" data-filter="failed">å¤±è´¥</button>
                    </div>
                </div>
                <div class="filter-group">
                    <label>æ—¶é—´ç­›é€‰:</label>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-time="all">å…¨éƒ¨</button>
                        <button class="filter-btn" data-time="today">ä»Šæ—¥</button>
                        <button class="filter-btn" data-time="week">æœ¬å‘¨</button>
                        <button class="filter-btn" data-time="month">æœ¬æœˆ</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="history-section">
            <h2>ğŸ“œ åˆæˆè®°å½•</h2>
            <div class="history-list">
                {{#each historyRecords}}
                <div class="history-item {{result}}" data-date="{{date}}">
                    <div class="record-header">
                        <div class="record-time">
                            <span class="time-icon">ğŸ•</span>
                            <span class="time-text">{{formatTime timestamp}}</span>
                        </div>
                        <div class="record-result {{result}}">
                            {{#if (eq result 'success')}}
                            <span class="result-icon">âœ…</span>
                            <span class="result-text">åˆæˆæˆåŠŸ</span>
                            {{else}}
                            <span class="result-icon">âŒ</span>
                            <span class="result-text">åˆæˆå¤±è´¥</span>
                            {{/if}}
                        </div>
                    </div>
                    
                    <div class="record-content">
                        <div class="materials-section">
                            <h4>ğŸ§± ä½¿ç”¨ææ–™</h4>
                            <div class="materials-list">
                                {{#each materials}}
                                <div class="material-item">
                                    <span class="material-icon">{{icon}}</span>
                                    <span class="material-name">{{name}}</span>
                                    <span class="material-count">Ã—{{count}}</span>
                                </div>
                                {{/each}}
                            </div>
                        </div>
                        
                        <div class="recipe-section">
                            <h4>ğŸ“‹ åˆæˆé…æ–¹</h4>
                            <div class="recipe-info">
                                <span class="recipe-icon">{{recipe.icon}}</span>
                                <span class="recipe-name">{{recipe.name}}</span>
                                <span class="recipe-level">Lv.{{recipe.level}}</span>
                            </div>
                        </div>
                        
                        {{#if (eq result 'success')}}
                        <div class="result-section success">
                            <h4>ğŸ è·å¾—ç‰©å“</h4>
                            <div class="result-items">
                                {{#each resultItems}}
                                <div class="result-item {{quality}}">
                                    <span class="item-icon">{{icon}}</span>
                                    <span class="item-name">{{name}}</span>
                                    <span class="item-count">Ã—{{count}}</span>
                                    {{#if quality}}
                                    <span class="item-quality">{{quality}}</span>
                                    {{/if}}
                                </div>
                                {{/each}}
                            </div>
                        </div>
                        {{else}}
                        <div class="result-section failed">
                            <h4>ğŸ’” å¤±è´¥åŸå› </h4>
                            <div class="failure-reason">
                                <span class="reason-icon">âš ï¸</span>
                                <span class="reason-text">{{failureReason}}</span>
                            </div>
                        </div>
                        {{/if}}
                        
                        <div class="cost-section">
                            <h4>ğŸ’° æ¶ˆè€—æˆæœ¬</h4>
                            <div class="cost-info">
                                <div class="cost-item">
                                    <span class="cost-icon">ğŸ’°</span>
                                    <span class="cost-label">é‡‘å¸:</span>
                                    <span class="cost-value">{{cost.money}}</span>
                                </div>
                                {{#if cost.energy}}
                                <div class="cost-item">
                                    <span class="cost-icon">âš¡</span>
                                    <span class="cost-label">èƒ½é‡:</span>
                                    <span class="cost-value">{{cost.energy}}</span>
                                </div>
                                {{/if}}
                            </div>
                        </div>
                    </div>
                    
                    <div class="record-footer">
                        <div class="experience-gain">
                            {{#if experienceGain}}
                            <span class="exp-icon">â­</span>
                            <span class="exp-text">è·å¾—ç»éªŒ: +{{experienceGain}}</span>
                            {{/if}}
                        </div>
                        <div class="record-id">
                            <span class="id-text">è®°å½•ID: {{id}}</span>
                        </div>
                    </div>
                </div>
                {{/each}}
            </div>
            
            {{#unless historyRecords.length}}
            <div class="empty-history">
                <div class="empty-icon">ğŸ“­</div>
                <div class="empty-text">æš‚æ— åˆæˆè®°å½•</div>
                <div class="empty-hint">å¼€å§‹ä½ çš„ç¬¬ä¸€æ¬¡åˆæˆå§ï¼</div>
            </div>
            {{/unless}}
        </div>

        <div class="analysis-section">
            <h2>ğŸ“ˆ æ•°æ®åˆ†æ</h2>
            <div class="analysis-grid">
                <div class="analysis-card">
                    <h4>ğŸ¯ æœ€å¸¸åˆæˆ</h4>
                    <div class="top-recipes">
                        {{#each topRecipes}}
                        <div class="top-item">
                            <span class="item-icon">{{icon}}</span>
                            <span class="item-name">{{name}}</span>
                            <span class="item-count">{{count}}æ¬¡</span>
                        </div>
                        {{/each}}
                    </div>
                </div>
                
                <div class="analysis-card">
                    <h4>ğŸ’ æœ€ä½³æ”¶ç›Š</h4>
                    <div class="best-profits">
                        {{#each bestProfits}}
                        <div class="profit-item">
                            <span class="item-icon">{{icon}}</span>
                            <span class="item-name">{{name}}</span>
                            <span class="profit-value">+{{profit}}é‡‘å¸</span>
                        </div>
                        {{/each}}
                    </div>
                </div>
                
                <div class="analysis-card">
                    <h4>â° æ´»è·ƒæ—¶æ®µ</h4>
                    <div class="active-hours">
                        {{#each activeHours}}
                        <div class="hour-item">
                            <span class="hour-time">{{hour}}:00</span>
                            <div class="hour-bar">
                                <div class="hour-fill" style="width: {{percentage}}%"></div>
                            </div>
                            <span class="hour-count">{{count}}æ¬¡</span>
                        </div>
                        {{/each}}
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="tips-section">
                <h3>ğŸ’¡ åˆæˆå°è´´å£«</h3>
                <ul>
                    <li>å·¥åŠç­‰çº§è¶Šé«˜ï¼ŒåˆæˆæˆåŠŸç‡è¶Šé«˜</li>
                    <li>ä½¿ç”¨é«˜å“è´¨ææ–™å¯ä»¥æå‡æˆåŠŸç‡</li>
                    <li>è¿ç»­åˆæˆä¼šæœ‰é¢å¤–çš„ç»éªŒåŠ æˆ</li>
                    <li>å®šæœŸæŸ¥çœ‹åˆæˆå†å²ï¼Œæ€»ç»“ç»éªŒè§„å¾‹</li>
                    <li>åˆç†å®‰æ’åˆæˆæ—¶é—´ï¼Œé¿å…ææ–™æµªè´¹</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>